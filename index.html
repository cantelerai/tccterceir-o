<<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AD Costeira - TCC</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- √çcones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <!-- Estilo opcional -->
    <style>
        body {
            scroll-behavior: smooth;
        }
        header h1 {
            font-weight: 700;
        }
        footer {
            font-size: 0.9rem;
        }
    </style>
</head>

<body>

    <!-- HEADER -->
    <header class="bg-primary text-white py-3">
        <div class="container d-flex justify-content-between align-items-center">
            <h1>AD Costeira</h1>
            <nav>
                <a href="#about" class="text-white mx-2">Sobre</a>
                <a href="#events" class="text-white mx-2">Eventos</a>
                <a href="#inscricao" class="text-white mx-2">Inscri√ß√£o</a>
                <a href="#contact" class="text-white mx-2">Contato</a>
            </nav>
        </div>
    </header>

    <!-- HERO -->
    <section id="hero" class="text-center py-5 bg-light">
        <div class="container">
            <h1 id="hero-title" class="display-4">Carregando T√≠tulo...</h1>
            <p class="lead">Lugar de gente feliz.</p>
        </div>
    </section>

    <!-- SOBRE -->
    <section id="about" class="py-5">
        <div class="container">
            <h2 id="about-title" class="text-center mb-4">Carregando T√≠tulo...</h2>
            <div class="row">
                <div class="col-md-8 mx-auto">
                    <p id="about-text-1">Carregando texto de apresenta√ß√£o...</p>
                    <p id="about-text-2">Carregando texto adicional 1...</p>
                    <p id="about-text-3">Carregando texto adicional 2...</p>
                </div>
            </div>
        </div>
    </section>

    <!-- EVENTOS -->
    <section id="events" class="py-5 bg-light">
        <div class="container">
            <h2 class="text-center mb-5">Pr√≥ximos Eventos Comunit√°rios</h2>
            <div class="row" id="events-list-container">
                <p class="text-center text-muted">Aguarde, carregando eventos do banco de dados...</p>
            </div>
        </div>
    </section>

    <!-- INSCRI√á√ÉO -->
    <section id="inscricao" class="py-5">
        <div class="container">
            <h3 class="text-center mb-4">Fa√ßa sua Inscri√ß√£o em um Evento</h3>
            
            <form id="inscricao-form" class="p-4 border rounded shadow-sm">
                <input type="hidden" id="event-id-input" name="event_id" required>
                
                <div class="alert alert-info" role="alert" id="evento-selecionado-display">
                    Para se inscrever, clique primeiro no bot√£o "Quero me inscrever" em um evento na lista.
                </div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="nome-inscrito" class="form-label">Seu Nome Completo</label>
                        <input type="text" class="form-control" id="nome-inscrito" required>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="email-inscrito" class="form-label">Seu Email</label>
                        <input type="email" class="form-control" id="email-inscrito" required>
                    </div>
                </div>
                
                <button type="submit" class="btn btn-success btn-lg w-100 mt-3">Confirmar Inscri√ß√£o</button>
                <div id="form-message" class="mt-3 text-center"></div>
            </form>
        </div>
    </section>

    <!-- CONTATO -->
    <section id="contact" class="py-5 bg-dark text-white">
        <div class="container text-center">
            <h2>Contato e Hor√°rios</h2>
            <p>Telefone: <span id="contact-phone">Carregando...</span></p>
            <h4 class="mt-4">Hor√°rio de Cultos</h4>
            <div id="service-times-list">
                Carregando hor√°rios...
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="bg-secondary text-white py-3">
        <div class="container text-center">
            <p id="footer-address">Carregando endere√ßo...</p>
            <p>&copy; 2025 AD Costeira. TCC Terceir√£o.</p>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- SUPABASE + JS EMBUTIDO -->
    <script type="module">
        import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm";

        // === CONFIGURA√á√ÉO DO SUPABASE ===
        const SUPABASE_URL = "https://xskasveyyprxuuilkavit.supabase.co";
        const SUPABASE_ANON_KEY = "COLOQUE_SUA_CHAVE_AQUI";
        const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        console.log("‚úÖ Supabase conectado com sucesso");

        // === EXEMPLO: carregar eventos ===
        async function carregarEventos() {
            const container = document.getElementById("events-list-container");
            const { data: eventos, error } = await supabase.from("eventos").select("*");

            if (error) {
                container.innerHTML = `<p class="text-danger text-center">Erro ao carregar eventos üò¢</p>`;
                console.error(error);
                return;
            }

            if (!eventos || eventos.length === 0) {
                container.innerHTML = `<p class="text-center text-muted">Nenhum evento dispon√≠vel no momento.</p>`;
                return;
            }

            container.innerHTML = eventos.map(ev => `
                <div class="col-md-4 mb-4">
                    <div class="card shadow-sm h-100">
                        <div class="card-body">
                            <h5 class="card-title">${ev.nome}</h5>
                            <p class="card-text">${ev.descricao || ''}</p>
                            <p><strong>Data:</strong> ${ev.data}</p>
                            <button class="btn btn-primary w-100 inscrever-btn" data-evento-id="${ev.id}" data-evento-nome="${ev.nome}">
                                Quero me inscrever
                            </button>
                        </div>
                    </div>
                </div>
            `).join("");

            document.querySelectorAll(".inscrever-btn").forEach(btn => {
                btn.addEventListener("click", () => {
                    const id = btn.getAttribute("data-evento-id");
                    const nome = btn.getAttribute("data-evento-nome");
                    document.getElementById("event-id-input").value = id;
                    document.getElementById("evento-selecionado-display").innerHTML =
                        `<strong>Evento selecionado:</strong> ${nome}`;
                });
            });
        }

        // === INSCRI√á√ÉO ===
        const form = document.getElementById("inscricao-form");
        form.addEventListener("submit", async (e) => {
            e.preventDefault();

            const nome = document.getElementById("nome-inscrito").value;
            const email = document.getElementById("email-inscrito").value;
            const eventoId = document.getElementById("event-id-input").value;
            const msg = document.getElementById("form-message");

            if (!eventoId) {
                msg.innerHTML = `<p class="text-danger">Selecione um evento antes de enviar.</p>`;
                return;
            }

            const { error } = await supabase.from("inscricoes").insert([{ nome, email, evento_id: eventoId }]);
            if (error) {
                msg.innerHTML = `<p class="text-danger">Erro ao cadastrar inscri√ß√£o üò¢</p>`;
                console.error(error);
            } else {
                msg.innerHTML = `<p class="text-success">Inscri√ß√£o feita com sucesso! üéâ</p>`;
                form.reset();
            }
        });

        // === INICIAR ===
        carregarEventos();
    </script>

</body>
</html>
